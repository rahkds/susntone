angular.module("User",[]),angular.module("Home",[]),angular.module("Student",[]),angular.module("Subject",[]),angular.module("Faculty",[]);var app=angular.module("test1",["Home","User","Student","Subject","Faculty","ngRoute"]),autoclose_popup=500,base_url="http://localhost:8081/sunstone/";app.config(["$routeProvider","$locationProvider",function(e,t){t.html5Mode({enabled:!0,requireBase:!1}),e.when("/students",{controller:"studentCtrl",templateUrl:"modules/students/views/student.html"}).when("/faculties",{controller:"facultyCtrl",templateUrl:"modules/faculties/views/faculty.html"}).when("/subjects",{controller:"subjectCtrl",templateUrl:"modules/subjects/views/subject.html"}).otherwise({redirect:"/"})}]),app.run(["$rootScope",function(e){e.server_url="http://localhost:8081/"}]);var module=angular.module("filters",[]),module=angular.module("directives",[]);(module=angular.module("Subject")).controller("subjectCtrl",["$scope","$http","$rootScope",function(a,l,e){e.tab_id="3",a.totalSubject=0,a.subjects=[],a.getSubjectList=function(){l({method:"GET",url:base_url+"subjects"}).then(function(e){a.subjects=e.data.data,Array.isArray(e.data.data)&&e.data.data.length&&(a.totalSubject=e.data.data.length)},function(){})},a.getSubjectList(),a.add_subject_field={},a.create_subject_popup_show=function(){a.add_subject_field={},angular.element("#addSubjectDlg").modal("show")},a.subject_update_field={},a.update_subject_popup_show=function(e){a.subject_update_field=Object.assign({},e),angular.element("#updateSubjectDlg").modal("show")},a.add_subject=function(){l({method:"POST",url:base_url+"subject",data:a.add_subject_field}).then(function(){swal({title:"Good job!",text:"subject successfully created.",icon:"success",timer:autoclose_popup}),angular.element("#addSubjectDlg").modal("hide"),a.getSubjectList()},function(e){0==e.status||404==e.status?a.errorMsglgn="invalid request.":a.errorMsglgn=e.data&&e.data.message&&e.data.message[0]||"Something went wrong, Please try again later.",swal("Error",a.errorMsglgn,"error")})},a.update_subject=function(){l({method:"PUT",url:base_url+"subject/"+a.subject_update_field.id,data:a.subject_update_field}).then(function(){swal({title:"Good job!",text:"subject successfullyc updated.",icon:"success",timer:autoclose_popup}),angular.element("#updateSubjectDlg").modal("hide"),a.getSubjectList()},function(e){0==e.status||404==e.status?a.errorMsglgn="invalid request.":a.errorMsglgn=e.data&&e.data.message&&e.data.message[0]||"Something went wrong, Please try again later.",swal("Error",a.errorMsglgn,"error")})},a.deleteSubject=function(t){t&&swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover this data!",icon:"warning",buttons:!0,dangerMode:!0}).then(function(e){e&&l({method:"DELETE",url:base_url+"subject/"+t}).then(function(){swal({title:"Good job!",text:"subject successfully deleted.",icon:"success",timer:autoclose_popup}),a.getSubjectList()},function(e){0==e.status||404==e.status?a.errorMsglgn="invalid request.":a.errorMsglgn=e.data&&e.data.message&&e.data.message[0]||"Something went wrong, Please try again later.",swal("Error",a.errorMsglgn,"error")})})}}]),(module=angular.module("Student")).controller("studentCtrl",["$scope","$http","$rootScope",function(a,l,e){e.tab_id="1",a.totalStudents=0,a.getStudentList=function(){l({method:"GET",url:base_url+"students"}).then(function(e){a.students=e.data.data,Array.isArray(e.data.data)&&(a.totalStudents=e.data.data.length)},function(){})},a.subjects=[],a.getSubjectList=function(){l({method:"GET",url:base_url+"subjects"}).then(function(e){a.subjects=e.data.data},function(){})},a.getStudentList(),a.getSubjectList(),a.student_field={},a.create_student_popup_show=function(){a.profile_file="",a.student_field={},angular.element("#addStudentDlg").modal("show")},a.student_update_field={},a.update_student_popup_show=function(e){a.profile_file="",a.student_update_field=Object.assign({},e),angular.element("#updateStudentDlg").modal("show")},a.getTheFile=function(n){a.$apply(function(e){e.theFile=n.files[0],e.FileMessage="";var t,a=e.theFile.name,l=a.lastIndexOf("."),u=a.substring(l,a.length).toLowerCase(),s="FileMessageSuccess_"+n.attributes[3].nodeValue,o="FileMessageError_"+n.attributes[3].nodeValue;".png"==u||".jpg"==u||".jpeg"==u?((t=new FileReader).readAsDataURL(n.files[0]),t.onload=function(){e.documentIsLoaded(event,n.attributes[3].nodeValue)},e[o]="",e[s]="File Validated"):(e.profile_pic="",angular.element(document.querySelector(".upload-file")).empty(),e[s]="",e[o]="Please upload correct File. Extension should be .png, .jpg, .jpeg")})},a.profile_file="",a.documentIsLoaded=function(e){a.$apply(function(){a.profile_file=e.target.result})},a.add_student=function(){a.profile_file&&(a.student_field.profile_file=a.profile_file),l({method:"POST",url:base_url+"student",data:a.student_field}).then(function(){swal({title:"Good job!",text:"Successfully student created.",icon:"success",timer:autoclose_popup}),angular.element("#addStudentDlg").modal("hide"),a.getStudentList()},function(e){0==e.status||404==e.status?a.errorMsglgn="invalid request.":a.errorMsglgn=e.data&&e.data.message&&e.data.message[0]||"Something went wrong, Please try again later.",swal("Error",a.errorMsglgn,"error")})},a.update_student=function(){console.log(a.profile_file),a.profile_file&&(a.student_update_field.profile_file=a.profile_file),l({method:"PUT",url:base_url+"student/"+a.student_update_field.id,data:a.student_update_field}).then(function(){swal({title:"Good job!",text:"Successfully student updated.",icon:"success",timer:autoclose_popup}),angular.element("#updateStudentDlg").modal("hide"),a.getStudentList()},function(e){0==e.status||404==e.status?a.errorMsglgn="invalid request.":a.errorMsglgn=e.data&&e.data.message&&e.data.message[0]||"Something went wrong, Please try again later.",swal("Error",a.errorMsglgn,"error")})},a.deleteStudent=function(t){t&&swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover this data!",icon:"warning",buttons:!0,dangerMode:!0}).then(function(e){e&&l({method:"DELETE",url:base_url+"student/"+t}).then(function(){swal({title:"Good job!",text:"Successfully student deleted.",icon:"success",timer:autoclose_popup}),a.getStudentList()},function(e){0==e.status||404==e.status?a.errorMsglgn="invalid request.":a.errorMsglgn=e.data&&e.data.message&&e.data.message[0]||"Something went wrong, Please try again later.",swal("Error",a.errorMsglgn,"error")})})}}]),(module=angular.module("Faculty")).controller("facultyCtrl",["$scope","$http","$rootScope",function(a,l,e){e.tab_id="2",a.totalFaculty=0,a.getFacultyList=function(){l({method:"GET",url:base_url+"faculties"}).then(function(e){a.faculties=e.data.data,Array.isArray(e.data.data)&&(a.totalFaculty=e.data.data.length)},function(){})},a.subjects=[],a.getSubjectList=function(){l({method:"GET",url:base_url+"subjects"}).then(function(e){a.subjects=e.data.data},function(){})},a.getFacultyList(),a.getSubjectList(),a.add_faculty_field={},a.create_faculty_popup_show=function(){a.profile_file="",a.add_faculty_field={},angular.element("#addFacultyDlg").modal("show")},a.faculty_update_field={},a.update_faculty_popup_show=function(e){a.profile_file="",a.faculty_update_field=Object.assign({},e),angular.element("#updateFacultyDlg").modal("show")},a.getTheFile=function(n){a.$apply(function(e){e.theFile=n.files[0],e.FileMessage="";var t,a=e.theFile.name,l=a.lastIndexOf("."),u=a.substring(l,a.length).toLowerCase(),s="FileMessageSuccess_"+n.attributes[3].nodeValue,o="FileMessageError_"+n.attributes[3].nodeValue;".png"==u||".jpg"==u||".jpeg"==u?((t=new FileReader).readAsDataURL(n.files[0]),t.onload=function(){e.documentIsLoaded(event,n.attributes[3].nodeValue)},e[o]="",e[s]="File Validated"):(e.profile_pic="",angular.element(document.querySelector(".upload-file")).empty(),e[s]="",e[o]="Please upload correct File. Extension should be .png, .jpg, .jpeg")})},a.profile_file="",a.documentIsLoaded=function(e){a.$apply(function(){a.profile_file=e.target.result})},a.add_faculty=function(){a.profile_file&&(a.add_faculty_field.profile_file=a.profile_file),l({method:"POST",url:base_url+"faculty",data:a.add_faculty_field}).then(function(){swal({title:"Good job!",text:"student successfully created.",icon:"success",timer:autoclose_popup}),angular.element("#addFacultyDlg").modal("hide"),a.getFacultyList()},function(e){0==e.status||404==e.status?a.errorMsglgn="invalid request.":a.errorMsglgn=e.data&&e.data.message&&e.data.message[0]||"Something went wrong, Please try again later.",swal("Error",a.errorMsglgn,"error")})},a.update_faculty=function(){a.profile_file&&(a.faculty_update_field.profile_file=a.profile_file),l({method:"PUT",url:base_url+"faculty/"+a.faculty_update_field.id,data:a.faculty_update_field}).then(function(){swal({title:"Good job!",text:"faculty successfullyc updated.",icon:"success",timer:autoclose_popup}),angular.element("#updateFacultyDlg").modal("hide"),a.getFacultyList()},function(e){0==e.status||404==e.status?a.errorMsglgn="invalid request.":a.errorMsglgn=e.data&&e.data.message&&e.data.message[0]||"Something went wrong, Please try again later.",swal("Error",a.errorMsglgn,"error")})},a.deleteFaculty=function(t){t&&swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover this data!",icon:"warning",buttons:!0,dangerMode:!0}).then(function(e){e&&l({method:"DELETE",url:base_url+"faculty/"+t}).then(function(){swal({title:"Good job!",text:"faculty successfully deleted.",icon:"success",timer:autoclose_popup}),a.getFacultyList()},function(e){0==e.status||404==e.status?a.errorMsglgn="invalid request.":(a.errorMsglgn=e.data&&e.data.mess,age&&e.data.message[0]),swal("Error",a.errorMsglgn,"error")})})}}]);